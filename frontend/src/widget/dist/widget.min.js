/*! For license information please see widget.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.widgetPayWidget=e():t.widgetPayWidget=e()}(this,()=>{return t={44:(t,e)=>{const n="[0-9]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+")(?:.|[\r\n]))+";e.KANJI=new RegExp(o,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp(n,"g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+o+"$"),a=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return i.test(t)},e.testNumeric=function(t){return a.test(t)},e.testAlphanumeric=function(t){return s.test(t)}},157:(t,e,n)=>{const o=n(886),r=n(953),i=n(899),a=n(820),s=n(421),c=n(756),l=n(332),u=n(518),d=n(764),p=n(427),h=n(565),g=n(208),f=n(801);function y(t,e,n){const o=t.size,r=h.getEncodedBits(e,n);let i,a;for(i=0;i<15;i++)a=1==(r>>i&1),i<6?t.set(i,8,a,!0):i<8?t.set(i+1,8,a,!0):t.set(o-15+i,8,a,!0),i<8?t.set(8,o-i-1,a,!0):i<9?t.set(8,15-i-1+1,a,!0):t.set(8,15-i-1,a,!0);t.set(o-8,8,1,!0)}function M(t,e,n,r){let h;if(Array.isArray(t))h=f.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let o=e;if(!o){const e=f.rawSplit(t);o=p.getBestVersionForData(e,n)}h=f.fromString(t,o||40)}}const M=p.getBestVersionForData(h,n);if(!M)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<M)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+M+".\n")}else e=M;const w=function(t,e,n){const r=new i;n.forEach(function(e){r.put(e.mode.bit,4),r.put(e.getLength(),g.getCharCountIndicator(e.mode,t)),e.write(r)});const a=8*(o.getSymbolTotalCodewords(t)-u.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const s=(a-r.getLengthInBits())/8;for(let t=0;t<s;t++)r.put(t%2?17:236,8);return function(t,e,n){const r=o.getSymbolTotalCodewords(e),i=r-u.getTotalCodewordsCount(e,n),a=u.getBlocksCount(e,n),s=a-r%a,c=Math.floor(r/a),l=Math.floor(i/a),p=l+1,h=c-l,g=new d(h);let f=0;const y=new Array(a),M=new Array(a);let w=0;const m=new Uint8Array(t.buffer);for(let t=0;t<a;t++){const e=t<s?l:p;y[t]=m.slice(f,f+e),M[t]=g.encode(y[t]),f+=e,w=Math.max(w,e)}const b=new Uint8Array(r);let v,x,N=0;for(v=0;v<w;v++)for(x=0;x<a;x++)v<y[x].length&&(b[N++]=y[x][v]);for(v=0;v<h;v++)for(x=0;x<a;x++)b[N++]=M[x][v];return b}(r,t,e)}(e,n,h),m=o.getSymbolSize(e),b=new a(m);return function(t,e){const n=t.size,o=c.getPositions(e);for(let e=0;e<o.length;e++){const r=o[e][0],i=o[e][1];for(let e=-1;e<=7;e++)if(!(r+e<=-1||n<=r+e))for(let o=-1;o<=7;o++)i+o<=-1||n<=i+o||(e>=0&&e<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===e||6===e)||e>=2&&e<=4&&o>=2&&o<=4?t.set(r+e,i+o,!0,!0):t.set(r+e,i+o,!1,!0))}}(b,e),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(b),function(t,e){const n=s.getPositions(e);for(let e=0;e<n.length;e++){const o=n[e][0],r=n[e][1];for(let e=-2;e<=2;e++)for(let n=-2;n<=2;n++)-2===e||2===e||-2===n||2===n||0===e&&0===n?t.set(o+e,r+n,!0,!0):t.set(o+e,r+n,!1,!0)}}(b,e),y(b,n,0),e>=7&&function(t,e){const n=t.size,o=p.getEncodedBits(e);let r,i,a;for(let e=0;e<18;e++)r=Math.floor(e/3),i=e%3+n-8-3,a=1==(o>>e&1),t.set(r,i,a,!0),t.set(i,r,a,!0)}(b,e),function(t,e){const n=t.size;let o=-1,r=n-1,i=7,a=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!t.isReserved(r,s-n)){let o=!1;a<e.length&&(o=1==(e[a]>>>i&1)),t.set(r,s-n,o),i--,-1===i&&(a++,i=7)}if(r+=o,r<0||n<=r){r-=o,o=-o;break}}}(b,w),isNaN(r)&&(r=l.getBestMask(b,y.bind(null,b,n))),l.applyMask(r,b),y(b,n,r),{modules:b,version:e,errorCorrectionLevel:n,maskPattern:r,segments:h}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n,i,a=r.M;return void 0!==e&&(a=r.from(e.errorCorrectionLevel,r.M),n=p.from(e.version),i=l.from(e.maskPattern),e.toSJISFunc&&o.setToSJISFunction(e.toSJISFunc)),M(t,n,a,i)}},208:(t,e,n)=>{const o=n(878),r=n(44);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!o.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return r.testNumeric(t)?e.NUMERIC:r.testAlphanumeric(t)?e.ALPHANUMERIC:r.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return n}}},280:(t,e,n)=>{const o=n(726);e.render=function(t,e,n){let r=n,i=e;void 0!==r||e&&e.getContext||(r=e,e=void 0),e||(i=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),r=o.getOptions(r);const a=o.getImageWidth(t.modules.size,r),s=i.getContext("2d"),c=s.createImageData(a,a);return o.qrToImageData(c.data,t,r),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(s,i,a),s.putImageData(c,0,0),i},e.renderToDataURL=function(t,n,o){let r=o;void 0!==r||n&&n.getContext||(r=n,n=void 0),r||(r={});const i=e.render(t,n,r),a=r.type||"image/png",s=r.rendererOpts||{};return i.toDataURL(a,s.quality)}},320:t=>{"use strict";var e={single_source_shortest_paths:function(t,n,o){var r={},i={};i[n]=0;var a,s,c,l,u,d,p,h=e.PriorityQueue.make();for(h.push(n,0);!h.empty();)for(c in s=(a=h.pop()).value,l=a.cost,u=t[s]||{})u.hasOwnProperty(c)&&(d=l+u[c],p=i[c],(void 0===i[c]||p>d)&&(i[c]=d,h.push(c,d),r[c]=s));if(void 0!==o&&void 0===i[o]){var g=["Could not find a path from ",n," to ",o,"."].join("");throw new Error(g)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],o=e;o;)n.push(o),t[o],o=t[o];return n.reverse(),n},find_path:function(t,n,o){var r=e.single_source_shortest_paths(t,n,o);return e.extract_shortest_path_from_predecessor_list(r,o)},PriorityQueue:{make:function(t){var n,o=e.PriorityQueue,r={};for(n in t=t||{},o)o.hasOwnProperty(n)&&(r[n]=o[n]);return r.queue=[],r.sorter=t.sorter||o.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},332:(t,e)=>{e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(t,n,o){switch(t){case e.Patterns.PATTERN000:return(n+o)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return o%3==0;case e.Patterns.PATTERN011:return(n+o)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2==0;case e.Patterns.PATTERN101:return n*o%2+n*o%3==0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2==0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let n=0,o=0,r=0,i=null,a=null;for(let s=0;s<e;s++){o=r=0,i=a=null;for(let c=0;c<e;c++){let e=t.get(s,c);e===i?o++:(o>=5&&(n+=o-5+3),i=e,o=1),e=t.get(c,s),e===a?r++:(r>=5&&(n+=r-5+3),a=e,r=1)}o>=5&&(n+=o-5+3),r>=5&&(n+=r-5+3)}return n},e.getPenaltyN2=function(t){const e=t.size;let n=0;for(let o=0;o<e-1;o++)for(let r=0;r<e-1;r++){const e=t.get(o,r)+t.get(o,r+1)+t.get(o+1,r)+t.get(o+1,r+1);4!==e&&0!==e||n++}return 3*n},e.getPenaltyN3=function(t){const e=t.size;let n=0,o=0,r=0;for(let i=0;i<e;i++){o=r=0;for(let a=0;a<e;a++)o=o<<1&2047|t.get(i,a),a>=10&&(1488===o||93===o)&&n++,r=r<<1&2047|t.get(a,i),a>=10&&(1488===r||93===r)&&n++}return 40*n},e.getPenaltyN4=function(t){let e=0;const n=t.data.length;for(let o=0;o<n;o++)e+=t.data[o];return 10*Math.abs(Math.ceil(100*e/n/5)-10)},e.applyMask=function(t,e){const o=e.size;for(let r=0;r<o;r++)for(let i=0;i<o;i++)e.isReserved(i,r)||e.xor(i,r,n(t,i,r))},e.getBestMask=function(t,n){const o=Object.keys(e.Patterns).length;let r=0,i=1/0;for(let a=0;a<o;a++){n(a),e.applyMask(a,t);const o=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(a,t),o<i&&(i=o,r=a)}return r}},333:t=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},357:(t,e,n)=>{const o=n(208);function r(t){this.mode=o.NUMERIC,this.data=t.toString()}r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e,n,o;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),o=parseInt(n,10),t.put(o,10);const r=this.data.length-e;r>0&&(n=this.data.substr(e),o=parseInt(n,10),t.put(o,3*r+1))},t.exports=r},375:(t,e,n)=>{const o=n(726);function r(t,e){const n=t.a/255,o=e+'="'+t.hex+'"';return n<1?o+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':o}function i(t,e,n){let o=t+e;return void 0!==n&&(o+=" "+n),o}e.render=function(t,e,n){const a=o.getOptions(e),s=t.modules.size,c=t.modules.data,l=s+2*a.margin,u=a.color.light.a?"<path "+r(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+r(a.color.dark,"stroke")+' d="'+function(t,e,n){let o="",r=0,a=!1,s=0;for(let c=0;c<t.length;c++){const l=Math.floor(c%e),u=Math.floor(c/e);l||a||(a=!0),t[c]?(s++,c>0&&l>0&&t[c-1]||(o+=a?i("M",l+n,.5+u+n):i("m",r,0),r=0,a=!1),l+1<e&&t[c+1]||(o+=i("h",s),s=0)):r++}return o}(c,s,a.margin)+'"/>',p='viewBox="0 0 '+l+" "+l+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+p+' shape-rendering="crispEdges">'+u+d+"</svg>\n";return"function"==typeof n&&n(null,h),h}},421:(t,e,n)=>{const o=n(886).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=o(t),r=145===n?26:2*Math.ceil((n-13)/(2*e-2)),i=[n-7];for(let t=1;t<e-1;t++)i[t]=i[t-1]-r;return i.push(6),i.reverse()},e.getPositions=function(t){const n=[],o=e.getRowColCoords(t),r=o.length;for(let t=0;t<r;t++)for(let e=0;e<r;e++)0===t&&0===e||0===t&&e===r-1||t===r-1&&0===e||n.push([o[t],o[e]]);return n}},427:(t,e,n)=>{const o=n(886),r=n(518),i=n(953),a=n(208),s=n(878),c=o.getBCHDigit(7973);function l(t,e){return a.getCharCountIndicator(t,e)+4}function u(t,e){let n=0;return t.forEach(function(t){const o=l(t.mode,e);n+=o+t.getBitsLength()}),n}e.from=function(t,e){return s.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!s.isValid(t))throw new Error("Invalid QR Code version");void 0===n&&(n=a.BYTE);const i=8*(o.getSymbolTotalCodewords(t)-r.getTotalCodewordsCount(t,e));if(n===a.MIXED)return i;const c=i-l(n,t);switch(n){case a.NUMERIC:return Math.floor(c/10*3);case a.ALPHANUMERIC:return Math.floor(c/11*2);case a.KANJI:return Math.floor(c/13);case a.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,n){let o;const r=i.from(n,i.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let o=1;o<=40;o++)if(u(t,o)<=e.getCapacity(o,n,a.MIXED))return o}(t,r);if(0===t.length)return 1;o=t[0]}else o=t;return function(t,n,o){for(let r=1;r<=40;r++)if(n<=e.getCapacity(r,o,t))return r}(o.mode,o.getLength(),r)},e.getEncodedBits=function(t){if(!s.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;o.getBCHDigit(e)-c>=0;)e^=7973<<o.getBCHDigit(e)-c;return t<<12|e}},433:(t,e,n)=>{const o=n(208),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(t){this.mode=o.ALPHANUMERIC,this.data=t}i.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*r.indexOf(this.data[e]);n+=r.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(r.indexOf(this.data[e]),6)},t.exports=i},518:(t,e,n)=>{const o=n(953),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case o.L:return r[4*(t-1)+0];case o.M:return r[4*(t-1)+1];case o.Q:return r[4*(t-1)+2];case o.H:return r[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case o.L:return i[4*(t-1)+0];case o.M:return i[4*(t-1)+1];case o.Q:return i[4*(t-1)+2];case o.H:return i[4*(t-1)+3];default:return}}},565:(t,e,n)=>{const o=n(886),r=o.getBCHDigit(1335);e.getEncodedBits=function(t,e){const n=t.bit<<3|e;let i=n<<10;for(;o.getBCHDigit(i)-r>=0;)i^=1335<<o.getBCHDigit(i)-r;return 21522^(n<<10|i)}},583:(t,e,n)=>{const o=n(333),r=n(157),i=n(280),a=n(375);function s(t,e,n,i,a){const s=[].slice.call(arguments,1),c=s.length,l="function"==typeof s[c-1];if(!l&&!o())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=e,e=i=void 0):2!==c||e.getContext||(i=n,n=e,e=void 0),new Promise(function(o,a){try{const a=r.create(n,i);o(t(a,e,i))}catch(t){a(t)}})}if(c<2)throw new Error("Too few arguments provided");2===c?(a=n,n=e,e=i=void 0):3===c&&(e.getContext&&void 0===a?(a=i,i=void 0):(a=i,i=n,n=e,e=void 0));try{const o=r.create(n,i);a(null,t(o,e,i))}catch(t){a(t)}}e.create=r.create,e.toCanvas=s.bind(null,i.render),e.toDataURL=s.bind(null,i.renderToDataURL),e.toString=s.bind(null,function(t,e,n){return a.render(t,n)})},592:(t,e,n)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(){var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,o,r,a){var s=o&&o.prototype instanceof l?o:l,u=Object.create(s.prototype);return i(u,"_invoke",function(n,o,r){var i,a,s,l=0,u=r||[],d=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,a=0,s=t,p.n=n,c}};function h(n,o){for(a=n,s=o,e=0;!d&&l&&!r&&e<u.length;e++){var r,i=u[e],h=p.p,g=i[2];n>3?(r=g===o)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((r=n<2&&h<i[1])?(a=0,p.v=o,p.n=i[1]):h<g&&(r=n<3||i[0]>o||o>g)&&(i[4]=n,i[5]=o,p.n=g,a=0))}if(r||n>1)return c;throw d=!0,o}return function(r,u,g){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&h(u,g),a=u,s=g;(e=a<2?t:s)||!d;){i||(a?a<3?(a>1&&(p.n=-1),h(a,s)):p.n=s:p.v=s);try{if(l=2,i){if(a||(r="next"),e=i[r]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),a=1);i=t}else if((e=(d=p.n<0)?s:n.call(o,p))!==c)break}catch(e){i=t,a=1,s=e}finally{l=1}}return{value:e,done:d}}}(n,r,a),!0),u}var c={};function l(){}function u(){}function d(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(i(e={},o,function(){return this}),e),h=d.prototype=l.prototype=Object.create(p);function g(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t}return u.prototype=d,i(h,"constructor",d),i(d,"constructor",u),u.displayName="GeneratorFunction",i(d,a,"GeneratorFunction"),i(h),i(h,a,"Generator"),i(h,o,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:g}})()}function i(t,e,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(t){r=0}i=function(t,e,n,o){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?r?r(t,e,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},i(t,e,n,o)}function a(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var i=t.apply(e,n);function s(t){a(i,o,r,s,c,"next",t)}function c(t){a(i,o,r,s,c,"throw",t)}s(void 0)})}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e,n){return(e=p(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,p(o.key),o)}}function p(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var h;if("undefined"!=typeof window)try{h=n(583),console.log("QRCode library loaded successfully")}catch(t){console.warn("QRCode library failed to load:",t)}var g=function(){return t=function t(){var e,n,o,r,i,a,s=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=l({apiKey:c.apiKey||null,paymentIntentId:c.paymentIntentId||null,baseUrl:c.baseUrl||"http://localhost:3000/api/v1",container:c.container||null,enabledWallets:c.enabledWallets||["leather","xverse","unisat","okx"],theme:{primaryColor:(null===(e=c.theme)||void 0===e?void 0:e.primaryColor)||"#3498db",backgroundColor:(null===(n=c.theme)||void 0===n?void 0:n.backgroundColor)||"#ffffff",textColor:(null===(o=c.theme)||void 0===o?void 0:o.textColor)||"#333333",fontFamily:(null===(r=c.theme)||void 0===r?void 0:r.fontFamily)||"'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif",borderRadius:(null===(i=c.theme)||void 0===i?void 0:i.borderRadius)||"8px",logoUrl:(null===(a=c.theme)||void 0===a?void 0:a.logoUrl)||null},lang:c.lang||"en",showQRCode:!1!==c.showQRCode,enablePolling:!1!==c.enablePolling,pollingInterval:c.pollingInterval||5e3},c),this.container=null,this.paymentData=null,this.connectedWallet=null,this.userAddress=null,this.pollingTimer=null,this.qrCodeGenerated=!1,this.availableWallets=this.detectWallets(),this.options.paymentIntentId&&setTimeout(function(){s.init()},0)},e=[{key:"init",value:(b=s(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.fetchPaymentIntent();case 1:this.render(),t.n=3;break;case 2:t.p=2,e=t.v,console.error("Failed to initialize widget:",e),this.renderError("Failed to load payment information");case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return b.apply(this,arguments)})},{key:"detectWallets",value:function(){var t=[];if("undefined"!=typeof window)try{(window.StacksProvider||window.btc)&&t.push({id:"leather",name:"Leather",icon:"https://leather.io/icons/leather-icon.svg",provider:"stacks-connect",supported:["stacks","bitcoin"]}),(window.XverseProviders||window.BitcoinProvider)&&t.push({id:"xverse",name:"Xverse",icon:"https://xverse.app/favicon.ico",provider:"sats-connect",supported:["bitcoin","stacks","ordinals"]}),window.unisat&&t.push({id:"unisat",name:"Unisat",icon:"https://unisat.io/favicon.ico",provider:"unisat",supported:["bitcoin","ordinals"]}),window.okxwallet&&t.push({id:"okx",name:"OKX Wallet",icon:"https://www.okx.com/favicon.ico",provider:"okx",supported:["bitcoin","stacks"]}),window.HiroWalletProvider&&t.push({id:"hiro",name:"Hiro Wallet",icon:"https://wallet.hiro.so/favicon.ico",provider:"hiro",supported:["stacks","bitcoin"]}),(window.webln||window.WebLNProvider)&&t.push({id:"bitcoin-connect",name:"Bitcoin Connect",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNGODlDMzUiLz4KPHBhdGggZD0iTTI4LjQ5MzIgMTcuODQ3MUMyOC45MDIzIDE1LjY2MTUgMjcuMjI0OCAxNC40MTQyIDI0Ljk0OTcgMTMuNTg2NEwyNS44NTY0IDEwLjEwMDFMMjMuODI3IDkuNTgxMDdMMjIuOTQzNyAxMi45NzY0QzIyLjM3ODMgMTIuODM2NCAyMS43OTUzIDEyLjcwMzggMjEuMjE0NyAxMi41NzIzTDIyLjEwMzQgOS4xNTI4OUwyMC4wNzQ2IDguNjMzODVMMTkuMTY3OSAxMi4xMjAyQzE4LjY5OTYgMTIuMDEzIDE4LjI0IDE5Ljc0NzQgMTguMjQgMTkuNzQ3NEwxOC4yNDAzIDE5Ljc0NjNDMTYuNzU2OCAxOS4zNzc2IDE1LjczIDE4Ljk0IDE1LjYwNyAxNi43Njk5TDEzLjU3NzcgMTcuMjkwMUwxMi41ODMzIDIxLjA1NzlDMTIuNTgzMyAyMS4wNTc5IDEzLjU3ODEgMjEuMjkxIDE0LjUzNjkgMjEuNDk2OEMxNS4zOTM4IDIxLjY4MTcgMTUuMzI1OSAyMS42MzQzIDE1LjMyNTkgMjEuNjM0M0wxNC4xODMyIDI2LjAzNzRMMTYuMjEzIDI2LjU1NjRMMTcuMTE5NyAyMy4wNzExQzE3LjcwMzcgMjMuMjIzIDE4LjI2OTIgMjMuMzYzIDAxOS40NTQgMjMuNjk2NEMxNi4wMTUzIDIzLjMwNDIgMTYuMDE1MyAyMy4zMDQyIDE2LjMxNTMgMjMuMzA0MkMxNy44MDkgMjYuMDA4MSAyMC4zNjkyIDI1LjQ0NjkgMjEuMjUwMyAyMy4wNTUxQzIyLjEzMTMgMjAuNjYzMiAyMS4yNTI0IDE5LjA4MDggMTkuNDA0NCAxOC4wMzMyQzIwLjgwNzEgMTcuNzAxNCwyMS44ODkxIDE2Ljk1MTcgMjIuMjM3NyAxNS40MjE0QzIyLjcwMDYgMTMuMzk0MSAyMS40MjI4IDEyLjIxOTkgMTkuNjIxOCAxMS42MTgxTDIwLjUzMDEgOC4xMjk5NEwxOC41IDcuNjExMDJMMTcuNTkzMyAxMS4wOTc0QzE3LjAyNzkgMTAuOTU3NCAxNi40NDQ5IDEwLjgyNDcgMTUuODc1NCAxMC42OTExTDE2Ljc4NjYgNy4yMjE0OUwxNC43NTc4IDYuNzAyNDVMMTMuODQ5NSAxMC4xODlDMTMuMzgxMiAxMC4wODE4IDEyLjkyMTYgOS45NzQ1MiAxMi40ODE4IDkuODYyNzRMMTIuNDkwNyA5LjgyNDE5TDkuNjMyNzkgOS4xMTQ1N7w5LjA3ODk2IDExLjI4NzFDOS4wNzg5NiAxMS4yODcxIDEwLjU2MyAxMS42NTUxIDEwLjUyMiAxMS42OTM3QzExLjM3ODkgMTEuODc4NiAxMS41NjExIDIuNDEwNCAxMS41NjExIDEyLjQxMDRDMTEuNDM4IDEyLjc1OTMgMTEuMjcyMyAxMi45OTg0IDEwLjc4MjggMTMuMDc2N0MxMC44MjQgMTMuMDM4IDkuMzM4MDYgMTIuNzQ5MiA5LjMzODA2IDEyLjc0OTJMOC4zNDM3IDE1LjE0MTdMMTAuOTkwNSAxNS43ODU0QzExLjUwODEgMTUuOTE3OSAxMi4wMTU1IDE2LjA1ODEgMTIuNTE0NSAxNi4xOTI5TDExLjYwMzMgMTkuNzAzNEwxMy42MzIxIDIwLjIyMjRMMTQuNTM4OCA2LjczNTk5QzE1LjExOTYgMTYuODg3NSAxNS43MDcgMTcuMDI1IDE2LjI4OCAxNy4xNTc3TDE1LjM4MSAyMC42NDIxTDE3LjQxIDIxLjE2MUwxOC4zMjEyIDE3LjY1NzNDMjEuMzE3MyAxOC4yNDI1IDIzLjUxMDYgMTguMDE3MyAyNC40NTYxIDE1LjM3MUMyNS4yMDA3IDEzLjI3NzggMjQuNTYyOCAxMi4xMDQ0IDIzLjEyMzMgMTEuMzU2NkMyNC4xODA3IDExLjE1NyAyNC45NzU0IDEwLjQ0MjUgMjUuMjU2MyA5LjA0MTc5QzI1LjY0MTggNy4xMzExOCAyNC4xOTQ1IDYuMjI3NzMgMjIuMzM2NCA1LjY5ODA0TDIzLjI0NDggMi4yMTA3NUwyMS4yMTU5IDEuNjkxN7wyMC4zMTI2IDUuMTYyNDJDMTkuNzQ4MiA1LjAyMTQ4IDE5LjE2MzkgNC44OTA0MSAxOC41ODI0IDQuNzU2NTdMMTkuNDkwNyAxLjMwMTYxTDE3LjQ2MTkgMC43ODI1NjhMMTYuNTUzNSA0LjI2OTg0QzE2LjA5MTEgNC4xNjQxNCAxNS42MzY2IDQuMDYwNzMgMTUuMTk4NyAzLjk0OTc5TDE1LjIwNjkgMy45MTU0MUwxMi4zNDk1IDMuMjA1NzlMMTEuNzk1NiA1LjM3ODM0QzExLjc5NTYgNS4zNzgzNCAxMy4yNzk2IDUuNzQ2MzMgMTMuMjM4NiA1Ljc4NDkyQzE0LjA5NTQgNS45Njk4NSAxNC4yNzc2IDYuNTAxNjQgMTQuMjc3NiA2LjUwMTY0TDEyLjM0OTkgMTMuMDM0OEwxMS4yMDY1IDE3LjQzNzlMMTMuMjM2MyAxNy45NTY5TDE0LjE0MyAxNC40NzE2QzE0LjcyOCAxNC42MjM2IDE1LjI5MzMgMTQuNzYzOSAxNS44NDkgMTQuODk3MkwxNC45NDc1IDE4LjM2OTFMMTYuOTc2MyAxOC44ODhMMTcuODgzIDE1LjQwMTdDMjAuODc5MSAxNS45ODY4IDIzLjA3MjUgMTUuNzYxNiAyNC4wMTggMTMuMTE1NEMyNC43NjI2IDExLjAyMTggMjQuMTI0NiA5Ljg0ODQxIDIyLjY4NTIgOS4xMDA2QzIzLjc0MjYgOC45MDA5NyAyNC41MzczIDguMTg2NDcgMjQuODE4MiA2Ljc4NThDMjUuMjExNCA0Ljg2NDQyIDIzLjc2MDQgMy45NTczNCAyMS44OTQ5IDMuNDMwODhMMjEuODk1IDMuNDMwN0wyMi44MDMzIDAgMjAuNzc0NSAtMC41MTkwNDNMMTkuODcxMyAyLjk1MTY5QzE5LjMwNjkgMi44MTA3NSAxOC43MjI1IDIuNjc5NjggMTguMTQxMSAyLjU0NTg0TDE5LjA0ODQgLTAuOTA5MTQ1TDE3LjAxOTYgLTEuNDI4MjFMMTYuMTExMyAyLjA1OTA4QzE1LjY0MjggMS45NTE3OSAxNS4xODQgMS44NDU3MyAxNC43NDQ2IDEuNzMzMDhMMTQuNzU0MyAxLjY5MjYxTDExLjg5NTkgMC45ODQwNjJMMTEuMzQyMiAzLjE1NjUxQzExLjM0MjIgMy4xNTY1MSAxMi44MjYyIDMuNTI0NSAxMi43ODUyIDMuNTYzMDhDMTMuNjQyIDMuNzQ4MDIgMTMuODI0MyA0LjI3OTgxIDEzLjgyNDMgNC4yNzk4MUwxMS44OTY2IDEwLjgxM0wxMC43NTMyIDE1LjIxNjFMMTIuNzgzIDE1LjczNTFMMTMuNjg5NyAxMi4yNDk4QzE0LjI3NDcgMTIuNDAxOCAxNC44NCAxMi41NDIxIDE1LjM5NTcgMTIuNjc1NEwxNC40ODg3IDE2LjE0NjNMMTYuNTE3NSAxNi42NjUzTDE3LjY2MDkgMTEuMjYyMkwxNy42NjA3IDExLjI2MjZDMTkuNDU0NSAxMy45NjY1IDIyLjAxNDcgMTMuNDA1MyAyMi44OTU4IDExLjAxMzRDMjMuNzc2OSA4LjYyMTU0IDIyLjg5OCA3LjAzOTE0IDIxLjA1IDUuOTkxNTVDMjIuNDUyNyA1LjY1OTc1IDIzLjUzNDcgNC45MSAyMy44ODMzIDMuMzc5N0MyNC4zNDYyIDEuMzUyNDMgMjMuMDY4NCAwLjE3ODIyOCAyMS4yNjc0IC0wLjQyMzU5MUwyMS44OTUgMy40MzA3QzIwLjc0MSAzLjA5MzcgMTkuMjU2NyAyLjgwMzkgMTYuNTUzNSA0LjI2OThMMTcuODgzIDEyLjE5OTZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",provider:"webln",supported:["bitcoin","lightning"]}),void 0!==window.WalletConnectProvider&&t.push({id:"walletconnect",name:"WalletConnect",icon:"https://walletconnect.org/walletconnect-logo.png",provider:"walletconnect",supported:["bitcoin","stacks"]})}catch(t){console.warn("Error detecting wallets:",t)}return t}},{key:"fetchPaymentIntent",value:(m=s(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.options.baseUrl,"/payment-intents/").concat(this.options.paymentIntentId),{headers:l({"Content-Type":"application/json"},this.options.apiKey&&{Authorization:"Bearer ".concat(this.options.apiKey)})});case 1:if((e=t.v).ok){t.n=2;break}throw new Error("Failed to fetch payment intent: ".concat(e.status));case 2:return t.n=3,e.json();case 3:this.paymentData=t.v,t.n=5;break;case 4:t.p=4,n=t.v,console.warn("Using mock payment data for demo purposes:",n),this.paymentData={id:this.options.paymentIntentId||"mock-payment-intent",amount:.01,status:"requires_payment",description:"Test payment",merchant_id:"mock-merchant"};case 5:return t.a(2)}},t,this,[[0,4]])})),function(){return m.apply(this,arguments)})},{key:"render",value:function(){if(this.container=document.createElement("div"),this.container.className="sbtcpay-widget",this.container.innerHTML=this.getWidgetHTML(),this.attachEventListeners(),this.injectStyles(),this.options.container){var t=document.querySelector(this.options.container);t&&t.appendChild(this.container)}else document.body.appendChild(this.container)}},{key:"renderError",value:function(t){var e='\n      <div class="sbtcpay-widget-error">\n        <div class="sbtcpay-widget-error-content">\n          <h3>Error</h3>\n          <p>'.concat(t,"</p>\n        </div>\n      </div>\n    ");if(this.options.container){var n=document.querySelector(this.options.container);n&&(n.innerHTML=e)}else document.body.insertAdjacentHTML("beforeend",e)}},{key:"getWidgetHTML",value:function(){if(!this.paymentData)return"";var t=this.options.theme.logoUrl?'<div class="sbtcpay-widget-logo"><img src="'.concat(this.options.theme.logoUrl,'" alt="Merchant Logo" /></div>'):"";return this.getWalletSelectionHTML(),'\n      <div class="sbtcpay-widget-container">\n        <div class="sbtcpay-widget-header">\n          '.concat(t,'\n          <h3>Complete Your Payment</h3>\n        </div>\n        <div class="sbtcpay-widget-body">\n          <div class="sbtcpay-widget-payment-info">\n            <div class="sbtcpay-widget-amount">\n              <span class="label">Amount:</span>\n              <span class="value">').concat(this.paymentData.amount,' sBTC</span>\n            </div>\n            <div class="sbtcpay-widget-description">\n              <span class="label">Description:</span>\n              <span class="value">').concat(this.paymentData.description||"Payment","</span>\n            </div>\n          </div>\n          \n          ").concat(this.connectedWallet?this.getConnectedWalletHTML():this.getWalletSelectionHTML(),'\n          \n          <div class="sbtcpay-qrcode-container" id="sbtcpay-qrcode-container" style="display: none;">\n            <h4 class="sbtcpay-qrcode-header">Scan with your mobile wallet</h4>\n            <div id="sbtcpay-qrcode"></div>\n            <div class="sbtcpay-qr-details">Scan this code with your sBTC compatible wallet</div>\n            <div class="sbtcpay-payment-address" id="sbtcpay-payment-address"></div>\n          </div>\n          \n          <div class="sbtcpay-widget-status" id="sbtcpay-status"></div>\n        </div>\n        <div class="sbtcpay-widget-footer">\n          <p>Powered by sBTCPay</p>\n        </div>\n      </div>\n    ')}},{key:"getWalletSelectionHTML",value:function(){var t=this;if(0===this.availableWallets.length)return'\n        <div class="sbtcpay-no-wallets">\n          <p>No compatible wallets detected. Please install:</p>\n          <div class="sbtcpay-wallet-recommendations">\n            <a href="https://leather.io" target="_blank" rel="noopener">Leather Wallet</a>\n            <a href="https://xverse.app" target="_blank" rel="noopener">Xverse Wallet</a>\n            <a href="https://unisat.io" target="_blank" rel="noopener">Unisat Wallet</a>\n          </div>\n        </div>\n        <div style="text-align: center; margin: 16px 0 8px;">\n          <span style="display: inline-block; color: #888;">or</span>\n        </div>\n        <button id="sbtcpay-show-qr-button" class="sbtcpay-wallet-button primary">Show QR Code</button>\n      ';var e=this.availableWallets.filter(function(e){return t.options.enabledWallets.includes(e.id)}).map(function(t){return'\n        <button class="sbtcpay-wallet-button" data-wallet-id="'.concat(t.id,'">\n          <img src="').concat(t.icon,'" alt="').concat(t.name,'" class="wallet-icon" onerror="this.style.display=\'none\'" />\n          <span>Connect ').concat(t.name,"</span>\n        </button>\n      ")}).join("");return'\n      <div class="sbtcpay-wallet-selection">\n        <h4>Choose your wallet:</h4>\n        <div class="sbtcpay-wallet-buttons">\n          '.concat(e,'\n        </div>\n        <div style="text-align: center; margin: 16px 0 8px;">\n          <span style="display: inline-block; color: #888;">or</span>\n        </div>\n        <button id="sbtcpay-show-qr-button" class="sbtcpay-wallet-button primary">Show QR Code</button>\n      </div>\n    ')}},{key:"getConnectedWalletHTML",value:function(){return'\n      <div class="sbtcpay-connected-wallet">\n        <div class="sbtcpay-wallet-info">\n          <span class="wallet-name">Connected: '.concat(this.connectedWallet.name,'</span>\n          <span class="wallet-address">').concat(this.formatAddress(this.userAddress),'</span>\n        </div>\n        <div class="sbtcpay-widget-actions">\n          <button id="sbtcpay-pay-button" class="sbtcpay-button">Pay with sBTC</button>\n          <button id="sbtcpay-disconnect-button" class="sbtcpay-secondary-button">Disconnect</button>\n        </div>\n      </div>\n    ')}},{key:"formatAddress",value:function(t){return t?t.length<=16?t:"".concat(t.slice(0,8),"...").concat(t.slice(-8)):""}},{key:"attachEventListeners",value:function(){var t=this;this.container.querySelectorAll(".sbtcpay-wallet-button").forEach(function(e){e.addEventListener("click",function(){var n=e.dataset.walletId;t.connectWallet(n)})});var e=this.container.querySelector("#sbtcpay-show-qr-button");e&&e.addEventListener("click",function(){t.showQRCode()});var n=this.container.querySelector("#sbtcpay-pay-button");n&&n.addEventListener("click",function(){t.handlePayment()});var o=this.container.querySelector("#sbtcpay-disconnect-button");o&&o.addEventListener("click",function(){t.disconnectWallet()})}},{key:"connectWallet",value:(w=s(r().m(function t(e){var n,o,i,a;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.updateStatus("Connecting to wallet..."),t.p=1,n=this.availableWallets.find(function(t){return t.id===e})){t.n=2;break}throw new Error("Wallet ".concat(e," not found"));case 2:i=n.provider,t.n="stacks-connect"===i?3:"sats-connect"===i?5:"unisat"===i?7:"okx"===i?9:"hiro"===i?11:"webln"===i?13:"walletconnect"===i?15:17;break;case 3:return t.n=4,this.connectLeatherWallet();case 4:return o=t.v,t.a(3,18);case 5:return t.n=6,this.connectXverseWallet();case 6:return o=t.v,t.a(3,18);case 7:return t.n=8,this.connectUnisatWallet();case 8:return o=t.v,t.a(3,18);case 9:return t.n=10,this.connectOKXWallet();case 10:return o=t.v,t.a(3,18);case 11:return t.n=12,this.connectHiroWallet();case 12:return o=t.v,t.a(3,18);case 13:return t.n=14,this.connectBitcoinConnectWallet();case 14:return o=t.v,t.a(3,18);case 15:return t.n=16,this.connectWalletConnectWallet();case 16:return o=t.v,t.a(3,18);case 17:throw new Error("Unsupported wallet provider: ".concat(n.provider));case 18:this.connectedWallet=n,this.userAddress=o,this.updateStatus("Wallet connected successfully!"),this.updateDisplay(),this.options.enablePolling&&this.startPaymentPolling(),t.n=20;break;case 19:t.p=19,a=t.v,console.error("Failed to connect wallet:",a),this.updateStatus("Failed to connect: ".concat(a.message));case 20:return t.a(2)}},t,this,[[1,19]])})),function(t){return w.apply(this,arguments)})},{key:"connectLeatherWallet",value:(M=s(r().m(function t(){var e=this;return r().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t,n){try{if("undefined"==typeof showConnect)return void(window.btc&&window.btc.request?window.btc.request("getAddresses").then(function(e){e&&e.addresses&&e.addresses.length>0?t(e.addresses[0]):n(new Error("No addresses returned from Leather wallet"))}).catch(n):n(new Error("Leather wallet not detected")));var o={name:"sBTCPay Widget",icon:e.options.theme.logoUrl||"https://sbtcpay.com/icon.png"};showConnect({appDetails:o,onFinish:function(e){if(e&&e.userSession){var o=e.userSession.loadUserData();t(o.profile.stxAddress.mainnet)}else n(new Error("Authentication failed"))},onCancel:function(){n(new Error("User cancelled wallet connection"))}})}catch(t){n(t)}}))},t)})),function(){return M.apply(this,arguments)})},{key:"connectXverseWallet",value:(y=s(r().m(function t(){var e,n,o,i,a,s;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,"undefined"!=typeof request){t.n=1;break}throw new Error("Sats Connect library not available");case 1:return t.n=2,request("wallet_connect",null);case 2:if("success"!==(e=t.v).status){t.n=4;break}if(n=e.result.addresses,o=n.find(function(t){return"payment"===t.purpose}),i=o||n[0]){t.n=3;break}throw new Error("No addresses returned from Xverse wallet");case 3:return t.a(2,i.address);case 4:throw new Error((null===(a=e.error)||void 0===a?void 0:a.message)||"Failed to connect to Xverse wallet");case 5:t.n=7;break;case 6:throw t.p=6,s=t.v,new Error("Xverse connection failed: ".concat(s.message));case 7:return t.a(2)}},t,null,[[0,6]])})),function(){return y.apply(this,arguments)})},{key:"connectUnisatWallet",value:(f=s(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,window.unisat){t.n=1;break}throw new Error("Unisat wallet not detected");case 1:return t.n=2,window.unisat.requestAccounts();case 2:if((e=t.v)&&0!==e.length){t.n=3;break}throw new Error("No accounts returned from Unisat wallet");case 3:return t.a(2,e[0]);case 4:throw t.p=4,n=t.v,new Error("Unisat connection failed: ".concat(n.message));case 5:return t.a(2)}},t,null,[[0,4]])})),function(){return f.apply(this,arguments)})},{key:"connectOKXWallet",value:(g=s(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,window.okxwallet&&window.okxwallet.bitcoin){t.n=1;break}throw new Error("OKX wallet not detected");case 1:return t.n=2,window.okxwallet.bitcoin.connect();case 2:if((e=t.v)&&e.address){t.n=3;break}throw new Error("No address returned from OKX wallet");case 3:return t.a(2,e.address);case 4:throw t.p=4,n=t.v,new Error("OKX connection failed: ".concat(n.message));case 5:return t.a(2)}},t,null,[[0,4]])})),function(){return g.apply(this,arguments)})},{key:"connectHiroWallet",value:(p=s(r().m(function t(){var e,n,o;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,window.HiroWalletProvider){t.n=1;break}throw new Error("Hiro wallet not detected");case 1:return e=window.HiroWalletProvider,t.n=2,e.connect();case 2:return t.n=3,e.getAddresses();case 3:if((n=t.v)&&0!==n.length){t.n=4;break}throw new Error("No accounts returned from Hiro wallet");case 4:return t.a(2,n[0]);case 5:throw t.p=5,o=t.v,new Error("Hiro wallet connection failed: ".concat(o.message));case 6:return t.a(2)}},t,null,[[0,5]])})),function(){return p.apply(this,arguments)})},{key:"connectBitcoinConnectWallet",value:(u=s(r().m(function t(){var e,n,o,i;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,void 0!==window.webln||void 0!==window.WebLNProvider){t.n=1;break}throw new Error("WebLN provider not detected");case 1:return!(n=window.webln)&&window.WebLNProvider&&(n=new window.WebLNProvider),t.n=2,n.enable();case 2:return t.n=3,n.getInfo();case 3:return o=t.v,console.log("WebLN wallet connected:",o),t.a(2,(null===(e=o.node)||void 0===e?void 0:e.publicKey)||"webln-user");case 4:throw t.p=4,i=t.v,new Error("Bitcoin Connect wallet connection failed: ".concat(i.message));case 5:return t.a(2)}},t,null,[[0,4]])})),function(){return u.apply(this,arguments)})},{key:"connectWalletConnectWallet",value:(c=s(r().m(function t(){var e,n,o;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,void 0!==window.WalletConnectProvider){t.n=1;break}throw new Error("WalletConnect provider not detected");case 1:return e=new window.WalletConnectProvider({rpc:{1:"https://cloudflare-eth.com"}}),t.n=2,e.enable();case 2:if((n=t.v)&&0!==n.length){t.n=3;break}throw new Error("No accounts returned from WalletConnect");case 3:return this._walletConnectProvider=e,t.a(2,n[0]);case 4:throw t.p=4,o=t.v,new Error("WalletConnect connection failed: ".concat(o.message));case 5:return t.a(2)}},t,this,[[0,4]])})),function(){return c.apply(this,arguments)})},{key:"disconnectWallet",value:function(){if(this._walletConnectProvider){try{this._walletConnectProvider.disconnect()}catch(t){console.warn("Error disconnecting WalletConnect:",t)}this._walletConnectProvider=null}this.connectedWallet=null,this.userAddress=null,this.pollingTimer&&(clearInterval(this.pollingTimer),this.pollingTimer=null),this.updateStatus("Wallet disconnected"),this.updateDisplay()}},{key:"updateDisplay",value:function(){if(this.container){var t=this.container.querySelector(".sbtcpay-widget-body");if(t){var e=this.getWidgetHTML(),n=document.createElement("div");n.innerHTML=e;var o=n.querySelector(".sbtcpay-widget-body");t.innerHTML=o.innerHTML,this.attachEventListeners()}}else console.warn("Widget container not found, cannot update display")}},{key:"handlePayment",value:(a=s(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.connectedWallet&&this.userAddress){t.n=1;break}return this.updateStatus("Please connect a wallet first","error"),t.a(2);case 1:return this.updateStatus("Processing payment..."),t.p=2,t.n=3,this.generateQRCode();case 3:(e=this.container.querySelector("#sbtcpay-qrcode-container"))&&(e.style.display="block"),this.updateStatus("Please complete the payment in your wallet"),!this.pollingTimer&&this.options.enablePolling&&this.startPaymentPolling(),t.n=5;break;case 4:t.p=4,n=t.v,console.error("Payment error:",n),this.updateStatus("Payment failed: ".concat(n.message),"error");case 5:return t.a(2)}},t,this,[[2,4]])})),function(){return a.apply(this,arguments)})},{key:"showQRCode",value:(i=s(r().m(function t(){var e,n,o,i;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.generateQRCode();case 1:(e=this.container.querySelector("#sbtcpay-qrcode-container"))&&(e.style.display="block",(n=this.container.querySelector("#sbtcpay-qrcode"))&&(n.style.display="block"),(o=this.container.querySelector(".sbtcpay-qr-details"))&&(o.style.display="block")),this.updateStatus("Scan QR code with your mobile wallet"),!this.pollingTimer&&this.options.enablePolling&&this.startPaymentPolling(),t.n=3;break;case 2:t.p=2,i=t.v,console.error("QR code error:",i),this.updateStatus("Failed to generate QR code: ".concat(i.message),"error");case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"generateQRCode",value:(o=s(r().m(function t(){var e,n,o,i,a,s,c,l;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if((e=this.container.querySelector("#sbtcpay-qrcode-container"))&&(n=e.querySelector("#sbtcpay-qrcode"))&&(n.innerHTML=""),t.p=1,o=this.generatePaymentData(),(i=this.container.querySelector("#sbtcpay-payment-address"))&&o.address&&(i.innerHTML='\n          <div class="payment-address-info">\n            <label>Payment Address:</label>\n            <div class="address-text" onclick="navigator.clipboard.writeText(\''.concat(o.address,'\')" title="Click to copy">\n              ').concat(o.address,"\n            </div>\n            <small>Click to copy address</small>\n          </div>\n        ")),!(a=this.container.querySelector("#sbtcpay-qrcode"))){t.n=7;break}if(t.p=2,!h||!h.toCanvas){t.n=3;break}s=document.createElement("canvas"),h.toCanvas(s,o.qrText,{width:200,margin:1,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"}),a.appendChild(s),console.log("QR code generated using imported library"),t.n=5;break;case 3:if(!window.QRCode){t.n=4;break}new window.QRCode(a,{text:o.qrText,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:window.QRCode.CorrectLevel?window.QRCode.CorrectLevel.H:0}),console.log("QR code generated using global library"),t.n=5;break;case 4:throw new Error("No QR code library available");case 5:t.n=7;break;case 6:t.p=6,c=t.v,console.error("QR code generation failed:",c),a.innerHTML='\n            <div class="qr-fallback">\n              <p>QR Code Library not loaded</p>\n              <p>Amount: '.concat(this.paymentData.amount," sBTC</p>\n              ").concat(o.address?"<p>To: ".concat(o.address,"</p>"):"","\n            </div>\n          ");case 7:this.qrCodeGenerated=!0,t.n=9;break;case 8:throw t.p=8,l=t.v,console.error("Failed to generate QR code:",l),l;case 9:return t.a(2)}},t,this,[[2,6],[1,8]])})),function(){return o.apply(this,arguments)})},{key:"generatePaymentData",value:function(){var t="SP1234567890ABCDEF1234567890ABCDEF12345678",e="stacks:".concat(t,"?amount=").concat(this.paymentData.amount,"&memo=").concat(encodeURIComponent(this.paymentData.description||"sBTCPay Payment"));return{address:t,amount:this.paymentData.amount,qrText:e,description:this.paymentData.description}}},{key:"startPaymentPolling",value:function(){var t=this;this.pollingTimer&&clearInterval(this.pollingTimer),this.updateStatus("Waiting for payment confirmation..."),this.pollingTimer=setInterval(s(r().m(function e(){var n,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.checkPaymentStatus();case 1:(n=e.v).confirmed?t.handlePaymentSuccess(n):n.failed&&t.handlePaymentFailure(n),e.n=3;break;case 2:e.p=2,o=e.v,console.error("Error checking payment status:",o);case 3:return e.a(2)}},e,null,[[0,2]])})),this.options.pollingInterval),setTimeout(function(){t.pollingTimer&&(clearInterval(t.pollingTimer),t.pollingTimer=null,t.updateStatus("Payment timeout. Please try again.","warning"))},6e5)}},{key:"checkPaymentStatus",value:(n=s(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(this.options.baseUrl,"/payment-intents/").concat(this.options.paymentIntentId),{headers:l({"Content-Type":"application/json"},this.options.apiKey&&{Authorization:"Bearer ".concat(this.options.apiKey)})});case 1:if((e=t.v).ok){t.n=2;break}throw new Error("Failed to check payment status: ".concat(e.status));case 2:return t.n=3,e.json();case 3:return n=t.v,t.a(2,{confirmed:"succeeded"===n.status,failed:"failed"===n.status||"cancelled"===n.status,pending:"requires_payment"===n.status||"processing"===n.status,data:n})}},t,this)})),function(){return n.apply(this,arguments)})},{key:"handlePaymentSuccess",value:function(t){this.pollingTimer&&(clearInterval(this.pollingTimer),this.pollingTimer=null),this.updateStatus("Payment confirmed! Thank you.","success");var e=this.container.querySelector("#sbtcpay-qrcode-container");e&&(e.style.display="none"),this.showSuccessState(t.data),this.options.onSuccess&&this.options.onSuccess(t.data)}},{key:"handlePaymentFailure",value:function(t){this.pollingTimer&&(clearInterval(this.pollingTimer),this.pollingTimer=null),this.updateStatus("Payment failed. Please try again.","error"),this.options.onFailure&&this.options.onFailure(t.data)}},{key:"showSuccessState",value:function(t){var e=this.container.querySelector(".sbtcpay-widget-body");e&&(e.innerHTML='\n        <div class="sbtcpay-success">\n          <div class="success-icon">✓</div>\n          <h3>Payment Successful!</h3>\n          <p>Amount: '.concat(t.amount," sBTC</p>\n          ").concat(t.stacksTxId?"<p>Transaction ID: ".concat(t.stacksTxId,"</p>"):"","\n          <p>Thank you for your payment.</p>\n        </div>\n      "))}},{key:"updateStatus",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",o=null===(e=this.container)||void 0===e?void 0:e.querySelector("#sbtcpay-status");o&&(o.innerHTML='<p class="status-'.concat(n,'">').concat(t,"</p>"))}},{key:"injectStyles",value:function(){var t="sbtcpay-widget-styles";if(!document.getElementById(t)){var e=document.createElement("style");e.id=t,e.textContent="\n      /* Import Poppins font */\n      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');\n      \n      .sbtcpay-widget {\n        font-family: ".concat(this.options.theme.fontFamily,";\n        background-color: ").concat(this.options.theme.backgroundColor,";\n        color: ").concat(this.options.theme.textColor,";\n        border-radius: ").concat(this.options.theme.borderRadius,";\n        padding: 20px;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n        max-width: 500px;\n        width: 100%;\n        box-sizing: border-box;\n        position: relative;\n      }\n      \n      .sbtcpay-widget * {\n        box-sizing: border-box;\n      }\n      \n      .sbtcpay-widget-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 16px;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n        padding-bottom: 12px;\n      }\n      \n      .sbtcpay-widget-title {\n        font-size: 1.4rem;\n        font-weight: 600;\n        margin: 0;\n        color: ").concat(this.options.theme.textColor,";\n      }\n      \n      .sbtcpay-logo {\n        max-height: 40px;\n        max-width: 100px;\n      }\n      \n      .sbtcpay-widget-body {\n        margin-bottom: 16px;\n      }\n      \n      .sbtcpay-payment-info {\n        margin-bottom: 24px;\n      }\n      \n      .sbtcpay-payment-row {\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 8px;\n        font-size: 1rem;\n      }\n      \n      .sbtcpay-payment-label {\n        font-weight: 500;\n        color: ").concat(this.options.theme.textColor,";\n        opacity: 0.8;\n      }\n      \n      .sbtcpay-payment-value {\n        font-weight: 600;\n      }\n      \n      .sbtcpay-wallet-selection {\n        margin-top: 16px;\n      }\n      \n      .sbtcpay-wallet-options {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        margin-top: 8px;\n      }\n      \n      .sbtcpay-wallet-option {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        border: 1px solid rgba(0, 0, 0, 0.1);\n        border-radius: 8px;\n        padding: 10px 12px;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        background-color: #ffffff;\n      }\n      \n      .sbtcpay-wallet-option:hover {\n        border-color: ").concat(this.options.theme.primaryColor,";\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n        transform: translateY(-1px);\n      }\n      \n      .sbtcpay-wallet-icon {\n        width: 24px;\n        height: 24px;\n        object-fit: contain;\n      }\n      \n      .sbtcpay-wallet-name {\n        font-weight: 500;\n        color: ").concat(this.options.theme.textColor,";\n      }\n      \n      .sbtcpay-wallet-button {\n        background-color: transparent;\n        border: 1px solid ").concat(this.options.theme.primaryColor,";\n        color: ").concat(this.options.theme.primaryColor,";\n        border-radius: 6px;\n        padding: 10px 16px;\n        font-family: ").concat(this.options.theme.fontFamily,";\n        font-weight: 500;\n        font-size: 0.95rem;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        width: 100%;\n        margin-top: 8px;\n      }\n      \n      .sbtcpay-wallet-button:hover {\n        background-color: ").concat(this.options.theme.primaryColor,"10;\n      }\n      \n      .sbtcpay-wallet-button.primary {\n        background-color: ").concat(this.options.theme.primaryColor,";\n        color: white;\n      }\n      \n      .sbtcpay-wallet-button.primary:hover {\n        filter: brightness(1.1);\n      }\n      \n      .sbtcpay-connected-wallet {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 12px;\n        background-color: ").concat(this.options.theme.backgroundColor,";\n        border-radius: 8px;\n        border: 1px solid rgba(0, 0, 0, 0.1);\n      }\n      \n      .sbtcpay-wallet-info {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        margin-bottom: 12px;\n        width: 100%;\n      }\n      \n      .sbtcpay-address-display {\n        font-family: 'Roboto Mono', monospace;\n        font-size: 0.85rem;\n        background-color: rgba(0, 0, 0, 0.05);\n        padding: 6px 10px;\n        border-radius: 4px;\n        word-break: break-all;\n        flex: 1;\n        text-align: center;\n        cursor: pointer;\n      }\n      \n      .sbtcpay-status {\n        margin-top: 16px;\n        padding: 10px;\n        border-radius: 6px;\n        background-color: rgba(0, 0, 0, 0.05);\n        font-size: 0.9rem;\n        text-align: center;\n      }\n      \n      .sbtcpay-status.error {\n        background-color: rgba(220, 53, 69, 0.1);\n        color: #dc3545;\n      }\n      \n      .sbtcpay-status.success {\n        background-color: rgba(40, 167, 69, 0.1);\n        color: #28a745;\n      }\n      \n      .sbtcpay-status.warning {\n        background-color: rgba(255, 193, 7, 0.1);\n        color: #ffc107;\n      }\n      \n      .sbtcpay-qrcode-container {\n        display: none;\n        background-color: white;\n        padding: 16px;\n        border-radius: 8px;\n        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n        margin-top: 16px;\n        text-align: center;\n      }\n      \n      .sbtcpay-qrcode-header {\n        font-weight: 600;\n        margin-bottom: 16px;\n        color: ").concat(this.options.theme.textColor,";\n      }\n      \n      #sbtcpay-qrcode {\n        margin: 0 auto 16px;\n        width: 200px;\n        height: 200px;\n        border: 1px solid rgba(0, 0, 0, 0.1);\n        border-radius: 4px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background-color: white;\n        padding: 8px;\n      }\n      \n      .sbtcpay-qr-details {\n        font-size: 0.9rem;\n        margin: 12px 0;\n        color: ").concat(this.options.theme.textColor,";\n        font-weight: 500;\n        text-align: center;\n      }\n      \n      .payment-address-info {\n        margin-top: 12px;\n        padding: 8px;\n        background-color: rgba(0, 0, 0, 0.03);\n        border-radius: 6px;\n      }\n      \n      .payment-address-info label {\n        display: block;\n        font-size: 0.8rem;\n        color: ").concat(this.options.theme.textColor,";\n        opacity: 0.7;\n        margin-bottom: 4px;\n      }\n      \n      .address-text {\n        font-family: 'Roboto Mono', monospace;\n        font-size: 0.85rem;\n        word-break: break-all;\n        cursor: pointer;\n        padding: 4px;\n        border-radius: 4px;\n        transition: background-color 0.2s ease;\n      }\n      \n      .address-text:hover {\n        background-color: rgba(0, 0, 0, 0.05);\n      }\n      \n      .payment-address-info small {\n        display: block;\n        font-size: 0.75rem;\n        opacity: 0.7;\n        margin-top: 4px;\n      }\n      \n      .sbtcpay-widget-footer {\n        font-size: 0.8rem;\n        text-align: center;\n        color: ").concat(this.options.theme.textColor,";\n        opacity: 0.7;\n        margin-top: 16px;\n        padding-top: 12px;\n        border-top: 1px solid rgba(0, 0, 0, 0.1);\n      }\n      \n      .sbtcpay-widget a {\n        color: ").concat(this.options.theme.primaryColor,";\n        text-decoration: none;\n      }\n      \n      .sbtcpay-widget a:hover {\n        text-decoration: underline;\n      }\n      \n      .sbtcpay-no-wallets {\n        padding: 16px;\n        text-align: center;\n        background-color: rgba(0, 0, 0, 0.03);\n        border-radius: 8px;\n        margin-bottom: 16px;\n      }\n      \n      .sbtcpay-no-wallets-title {\n        font-weight: 600;\n        margin-bottom: 8px;\n      }\n      \n      .sbtcpay-wallet-recommendations {\n        margin-top: 12px;\n        font-size: 0.9rem;\n      }\n      \n      .sbtcpay-wallet-recommendations a {\n        display: inline-block;\n        margin: 4px 8px;\n      }\n      \n      .sbtcpay-success-animation {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 24px 0;\n      }\n      \n      .sbtcpay-success-circle {\n        width: 60px;\n        height: 60px;\n        background-color: #28a745;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: 30px;\n        margin-bottom: 16px;\n      }\n      \n      .sbtcpay-success-title {\n        font-weight: 600;\n        font-size: 1.2rem;\n        margin-bottom: 8px;\n      }\n      \n      .sbtcpay-tx-details {\n        margin-top: 16px;\n        font-size: 0.9rem;\n        width: 100%;\n      }\n      \n      .sbtcpay-tx-detail-row {\n        display: flex;\n        justify-content: space-between;\n        padding: 4px 0;\n      }\n      \n      .sbtcpay-tx-detail-label {\n        opacity: 0.8;\n      }\n      \n      .sbtcpay-tx-hash {\n        font-family: 'Roboto Mono', monospace;\n        font-size: 0.85rem;\n        word-break: break-all;\n        cursor: pointer;\n      }\n      \n      /* Responsive styles */\n      @media (max-width: 480px) {\n        .sbtcpay-widget {\n          padding: 16px;\n        }\n        \n        .sbtcpay-widget-title {\n          font-size: 1.2rem;\n        }\n      }\n    "),document.head.appendChild(e)}}}],e&&d(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,o,i,a,c,u,p,g,f,y,M,w,m,b}();document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('script[src*="widget.js"]').forEach(function(t){var e=t.getAttribute("data-api-key"),n=t.getAttribute("data-payment-intent-id"),o=t.getAttribute("data-container"),r=t.getAttribute("data-primary-color"),i=t.getAttribute("data-background-color"),a=t.getAttribute("data-text-color"),s=t.getAttribute("data-font-family"),c=t.getAttribute("data-border-radius"),l=t.getAttribute("data-logo-url");n&&new g({apiKey:e,paymentIntentId:n,container:o,theme:{primaryColor:r,backgroundColor:i,textColor:a,fontFamily:s,borderRadius:c,logoUrl:l}})})}),t.exports&&(t.exports=g,t.exports.default=g),"undefined"!=typeof window&&(window.SBTCPayWidget=g,console.log("SBTCPayWidget registered globally:",g.name))},713:(t,e,n)=>{const o=n(731);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)n[r+i]^=o.mul(t[r],e[i]);return n},e.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const t=n[0];for(let r=0;r<e.length;r++)n[r]^=o.mul(e[r],t);let r=0;for(;r<n.length&&0===n[r];)r++;n=n.slice(r)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=e.mul(n,new Uint8Array([1,o.exp(r)]));return n}},726:(t,e)=>{function n(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,o=t.width&&t.width>=21?t.width:void 0,r=t.scale||4;return{width:o,scale:o?4:r,margin:e,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const o=e.getScale(t,n);return Math.floor((t+2*n.margin)*o)},e.qrToImageData=function(t,n,o){const r=n.modules.size,i=n.modules.data,a=e.getScale(r,o),s=Math.floor((r+2*o.margin)*a),c=o.margin*a,l=[o.color.light,o.color.dark];for(let e=0;e<s;e++)for(let n=0;n<s;n++){let u=4*(e*s+n),d=o.color.light;e>=c&&n>=c&&e<s-c&&n<s-c&&(d=l[i[Math.floor((e-c)/a)*r+Math.floor((n-c)/a)]?1:0]),t[u++]=d.r,t[u++]=d.g,t[u++]=d.b,t[u]=d.a}}},731:(t,e)=>{const n=new Uint8Array(512),o=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)n[e]=t,o[t]=e,t<<=1,256&t&&(t^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return o[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[o[t]+o[e]]}},756:(t,e,n)=>{const o=n(886).getSymbolSize;e.getPositions=function(t){const e=o(t);return[[0,0],[e-7,0],[0,e-7]]}},764:(t,e,n)=>{const o=n(713);function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(t){this.degree=t,this.genPoly=o.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=o.mod(e,this.genPoly),r=this.degree-n.length;if(r>0){const t=new Uint8Array(this.degree);return t.set(n,r),t}return n},t.exports=r},801:(t,e,n)=>{const o=n(208),r=n(357),i=n(433),a=n(822),s=n(861),c=n(44),l=n(886),u=n(320);function d(t){return unescape(encodeURIComponent(t)).length}function p(t,e,n){const o=[];let r;for(;null!==(r=t.exec(n));)o.push({data:r[0],index:r.index,mode:e,length:r[0].length});return o}function h(t){const e=p(c.NUMERIC,o.NUMERIC,t),n=p(c.ALPHANUMERIC,o.ALPHANUMERIC,t);let r,i;return l.isKanjiModeEnabled()?(r=p(c.BYTE,o.BYTE,t),i=p(c.KANJI,o.KANJI,t)):(r=p(c.BYTE_KANJI,o.BYTE,t),i=[]),e.concat(n,r,i).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function g(t,e){switch(e){case o.NUMERIC:return r.getBitsLength(t);case o.ALPHANUMERIC:return i.getBitsLength(t);case o.KANJI:return s.getBitsLength(t);case o.BYTE:return a.getBitsLength(t)}}function f(t,e){let n;const c=o.getBestModeForData(t);if(n=o.from(e,c),n!==o.BYTE&&n.bit<c.bit)throw new Error('"'+t+'" cannot be encoded with mode '+o.toString(n)+".\n Suggested mode is: "+o.toString(c));switch(n!==o.KANJI||l.isKanjiModeEnabled()||(n=o.BYTE),n){case o.NUMERIC:return new r(t);case o.ALPHANUMERIC:return new i(t);case o.KANJI:return new s(t);case o.BYTE:return new a(t)}}e.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(f(e,null)):e.data&&t.push(f(e.data,e.mode)),t},[])},e.fromString=function(t,n){const r=function(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];switch(r.mode){case o.NUMERIC:e.push([r,{data:r.data,mode:o.ALPHANUMERIC,length:r.length},{data:r.data,mode:o.BYTE,length:r.length}]);break;case o.ALPHANUMERIC:e.push([r,{data:r.data,mode:o.BYTE,length:r.length}]);break;case o.KANJI:e.push([r,{data:r.data,mode:o.BYTE,length:d(r.data)}]);break;case o.BYTE:e.push([{data:r.data,mode:o.BYTE,length:d(r.data)}])}}return e}(h(t,l.isKanjiModeEnabled())),i=function(t,e){const n={},r={start:{}};let i=["start"];for(let a=0;a<t.length;a++){const s=t[a],c=[];for(let t=0;t<s.length;t++){const l=s[t],u=""+a+t;c.push(u),n[u]={node:l,lastCount:0},r[u]={};for(let t=0;t<i.length;t++){const a=i[t];n[a]&&n[a].node.mode===l.mode?(r[a][u]=g(n[a].lastCount+l.length,l.mode)-g(n[a].lastCount,l.mode),n[a].lastCount+=l.length):(n[a]&&(n[a].lastCount=l.length),r[a][u]=g(l.length,l.mode)+4+o.getCharCountIndicator(l.mode,e))}}i=c}for(let t=0;t<i.length;t++)r[i[t]].end=0;return{map:r,table:n}}(r,n),a=u.find_path(i.map,"start","end"),s=[];for(let t=1;t<a.length-1;t++)s.push(i.table[a[t]].node);return e.fromArray(s.reduce(function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[]))},e.rawSplit=function(t){return e.fromArray(h(t,l.isKanjiModeEnabled()))}},820:t=>{function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}e.prototype.set=function(t,e,n,o){const r=t*this.size+e;this.data[r]=n,o&&(this.reservedBit[r]=!0)},e.prototype.get=function(t,e){return this.data[t*this.size+e]},e.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},e.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=e},822:(t,e,n)=>{const o=n(208);function r(t){this.mode=o.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},t.exports=r},861:(t,e,n)=>{const o=n(208),r=n(886);function i(t){this.mode=o.KANJI,this.data=t}i.getBitsLength=function(t){return 13*t},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=r.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}},t.exports=i},878:(t,e)=>{e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},886:(t,e)=>{let n;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return o[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return void 0!==n},e.toSJIS=function(t){return n(t)}},899:t=>{function e(){this.buffer=[],this.length=0}e.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=e},953:(t,e)=>{e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return n}}}},e={},function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}(592).default;var t,e});