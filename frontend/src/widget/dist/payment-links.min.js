/*! For license information please see payment-links.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SBTCPayWidget=e():t.SBTCPayWidget=e()}(this,()=>(()=>{var t,e,r,n,o={388:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function c(r,n,o,a){var c=n&&n.prototype instanceof p?n:p,s=Object.create(c.prototype);return i(s,"_invoke",function(r,n,o){var i,a,c,p=0,s=o||[],f=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return i=e,a=0,c=t,l.n=r,u}};function y(r,n){for(a=r,c=n,e=0;!f&&p&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,d=i[2];r>3?(o=d===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=r<2&&y<i[1])?(a=0,l.v=n,l.n=i[1]):y<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,l.n=d,a=0))}if(o||r>1)return u;throw f=!0,n}return function(o,s,d){if(p>1)throw TypeError("Generator is already running");for(f&&1===s&&y(s,d),a=s,c=d;(e=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(l.n=-1),y(a,c)):l.n=c:l.v=c);try{if(p=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=l.n<0)?c:r.call(n,l))!==u)break}catch(e){i=t,a=1,c=e}finally{p=1}}return{value:e,done:f}}}(r,o,a),!0),s}var u={};function p(){}function s(){}function f(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(i(e={},n,function(){return this}),e),y=f.prototype=p.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t}return s.prototype=f,i(y,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(y),i(y,a,"Generator"),i(y,n,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),(o=function(){return{w:c,m:d}})()}function i(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,r,n){function a(e,r){i(t,e,function(t){return this._invoke(e,r,t)})}e?o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(a("next",0),a("throw",1),a("return",2))},i(t,e,r,n)}function a(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,u,"next",t)}function u(t){a(i,n,o,c,u,"throw",t)}c(void 0)})}}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function s(t,e,r){return(e=l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var e=function(t){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(e)?e:e+""}var y=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=p({apiKey:e.apiKey||null,baseUrl:e.baseUrl||"http://localhost:3000/api/v1"},e)},e=[{key:"generatePaymentLink",value:(a=c(o().m(function t(e){var r,n,i,a;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.options.baseUrl,"/payment-intents"),{method:"POST",headers:p({"Content-Type":"application/json"},this.options.apiKey&&{Authorization:"Bearer ".concat(this.options.apiKey)}),body:JSON.stringify({amount:e.amount,description:e.description,currency:e.currency||"sBTC",expiresAt:e.expiresAt,password:e.password,metadata:e.metadata})});case 1:if((r=t.v).ok){t.n=2;break}throw new Error("Failed to create payment intent: ".concat(r.status));case 2:return t.n=3,r.json();case 3:return n=t.v,i="".concat(window.location.origin,"/pay/").concat(n.id),t.a(2,{id:n.id,link:i,qrCodeData:"sBTC://".concat(n.id),paymentIntent:n});case 4:throw t.p=4,a=t.v,console.error("Error generating payment link:",a),a;case 5:return t.a(2)}},t,this,[[0,4]])})),function(t){return a.apply(this,arguments)})},{key:"generateQRCode",value:(i=c(o().m(function t(e){var n,i,a,c,u,p=arguments;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:{},t.p=1,c=window.QRCode){t.n=3;break}return t.n=2,r.e(583).then(r.t.bind(r,583,19));case 2:c=t.v.default;case 3:return i=c,a=document.createElement("canvas"),t.n=4,i.toCanvas(a,e,{width:n.width||200,height:n.height||200,margin:n.margin||2,color:{dark:n.colorDark||"#000000",light:n.colorLight||"#ffffff"}});case 4:return t.a(2,a.toDataURL());case 5:throw t.p=5,u=t.v,console.error("Error generating QR code:",u),u;case 6:return t.a(2)}},t,null,[[1,5]])})),function(t){return i.apply(this,arguments)})},{key:"getPaymentLink",value:(n=c(o().m(function t(e){var r,n,i,a;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.options.baseUrl,"/payment-intents/").concat(e),{headers:p({"Content-Type":"application/json"},this.options.apiKey&&{Authorization:"Bearer ".concat(this.options.apiKey)})});case 1:if((r=t.v).ok){t.n=2;break}throw new Error("Failed to fetch payment link: ".concat(r.status));case 2:return t.n=3,r.json();case 3:return n=t.v,i="".concat(window.location.origin,"/pay/").concat(n.id),t.a(2,{id:n.id,link:i,qrCodeData:"sBTC://".concat(n.id),paymentIntent:n});case 4:throw t.p=4,a=t.v,console.error("Error fetching payment link:",a),a;case 5:return t.a(2)}},t,this,[[0,4]])})),function(t){return n.apply(this,arguments)})}],e&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,i,a}();t.exports&&(t.exports=y),window.SBTCPayPaymentLinks=y}},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return o[t](r,r.exports,a),r.exports}return a.m=o,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);a.r(o);var i={};t=t||[null,e({}),e([]),e(e)];for(var c=2&n&&r;("object"==typeof c||"function"==typeof c)&&!~t.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach(t=>i[t]=()=>r[t]);return i.default=()=>r,a.d(o,i),o},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce((e,r)=>(a.f[r](t,e),e),[])),a.u=t=>t+".min.js",a.miniCssF=t=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r={},n="SBTCPayWidget:",a.l=(t,e,o,i)=>{if(r[t])r[t].push(e);else{var c,u;if(void 0!==o)for(var p=document.getElementsByTagName("script"),s=0;s<p.length;s++){var f=p[s];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==n+o){c=f;break}}c||(u=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.setAttribute("data-webpack",n+o),c.src=t),r[t]=[e];var l=(e,n)=>{c.onerror=c.onload=null,clearTimeout(y);var o=r[t];if(delete r[t],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach(t=>t(n)),e)return e(n)},y=setTimeout(l.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=l.bind(null,c.onerror),c.onload=l.bind(null,c.onload),u&&document.head.appendChild(c)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={351:0};a.f.j=(e,r)=>{var n=a.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((r,o)=>n=t[e]=[r,o]);r.push(n[2]=o);var i=a.p+a.u(e),c=new Error;a.l(i,r=>{if(a.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}},"chunk-"+e,e)}};var e=(e,r)=>{var n,o,[i,c,u]=r,p=0;if(i.some(e=>0!==t[e])){for(n in c)a.o(c,n)&&(a.m[n]=c[n]);u&&u(a)}for(e&&e(r);p<i.length;p++)o=i[p],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0},r=this.webpackChunkSBTCPayWidget=this.webpackChunkSBTCPayWidget||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),a(388)})());